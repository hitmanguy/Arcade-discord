{"version":3,"sources":["../src/index.ts"],"sourcesContent":["// SPDX-FileCopyrightText: 2024 LiveKit, Inc.\n//\n// SPDX-License-Identifier: Apache-2.0\nimport type { MessageInitShape } from '@bufbuild/protobuf';\nimport { create } from '@bufbuild/protobuf';\nimport type { AudioEncoding, TrackPublishOptionsSchema, VideoEncoding } from './proto/room_pb.js';\nimport {\n  AudioEncodingSchema,\n  IceServerSchema,\n  type IceServer as IceServerType,\n  type TrackPublishOptions as TrackPublishOptionsType,\n  VideoEncodingSchema,\n} from './proto/room_pb.js';\nimport { TrackSource } from './proto/track_pb.js';\nimport { VideoCodec } from './proto/video_frame_pb.js';\n\nexport { Room, RoomEvent, ConnectError, type RoomOptions, type RtcConfiguration } from './room.js';\nexport { Participant, RemoteParticipant, LocalParticipant } from './participant.js';\nexport {\n  Track,\n  type LocalTrack,\n  type RemoteTrack,\n  type VideoTrack,\n  LocalAudioTrack,\n  LocalVideoTrack,\n  RemoteAudioTrack,\n  RemoteVideoTrack,\n  type AudioTrack,\n} from './track.js';\nexport { VideoFrame } from './video_frame.js';\nexport { AudioFrame, combineAudioFrames } from './audio_frame.js';\nexport { AudioStream } from './audio_stream.js';\nexport { AudioResampler, AudioResamplerQuality } from './audio_resampler.js';\nexport { VideoStream, type VideoFrameEvent } from './video_stream.js';\nexport { AudioSource } from './audio_source.js';\nexport { VideoSource } from './video_source.js';\nexport {\n  TrackPublication,\n  RemoteTrackPublication,\n  LocalTrackPublication,\n} from './track_publication.js';\nexport { type Transcription, type TranscriptionSegment } from './transcription.js';\nexport {\n  E2EEManager,\n  type E2EEOptions,\n  type KeyProviderOptions,\n  KeyProvider,\n  FrameCryptor,\n} from './e2ee.js';\n\nexport {\n  ConnectionQuality,\n  IceTransportType,\n  DataPacketKind,\n  ContinualGatheringPolicy,\n  ConnectionState,\n} from './proto/room_pb.js';\nexport { RpcError, type RpcInvocationData, type PerformRpcParams } from './rpc.js';\nexport { EncryptionType, EncryptionState } from './proto/e2ee_pb.js';\nexport { StreamState, TrackKind, TrackSource } from './proto/track_pb.js';\nexport { VideoBufferType, VideoRotation, VideoCodec } from './proto/video_frame_pb.js';\nexport { ParticipantKind } from './proto/participant_pb.js';\nexport { dispose } from './ffi_client.js';\nexport type { ChatMessage } from './types.js';\n\n// exposing helpers for API compatibility with 1.x version of protobuf-es where these were class instances\n\ntype IceServerInit = MessageInitShape<typeof IceServerSchema> & {\n  urls: string[];\n};\nexport class IceServer implements IceServerType {\n  $typeName = 'livekit.proto.IceServer' as const;\n  urls: string[];\n  username: string;\n  password: string;\n  constructor(init: IceServerInit) {\n    const { urls, username, password } = init;\n    this.urls = urls;\n    this.username = username ?? '';\n    this.password = password ?? '';\n    create(IceServerSchema, init);\n  }\n}\n\nexport class TrackPublishOptions implements TrackPublishOptionsType {\n  $typeName = 'livekit.proto.TrackPublishOptions' as const;\n  videoCodec: VideoCodec;\n  videoEncoding?: VideoEncoding | undefined;\n  audioEncoding?: AudioEncoding | undefined;\n  dtx: boolean;\n  simulcast: boolean;\n  source: TrackSource;\n  stream: string;\n  red: boolean;\n\n  constructor(init: MessageInitShape<typeof TrackPublishOptionsSchema> = {}) {\n    const { videoCodec, videoEncoding, audioEncoding, dtx, simulcast, source, stream, red } = init;\n    this.videoCodec = videoCodec ?? VideoCodec.VP8;\n    if (videoEncoding) {\n      this.videoEncoding = create(VideoEncodingSchema, videoEncoding);\n    }\n    if (audioEncoding) {\n      this.audioEncoding = create(AudioEncodingSchema, audioEncoding);\n    }\n    this.dtx = dtx ?? false;\n    this.simulcast = simulcast ?? false;\n    this.source = source ?? TrackSource.SOURCE_UNKNOWN;\n    this.stream = stream ?? '';\n    this.red = red ?? false;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,sBAAuB;AAEvB,qBAMO;AACP,sBAA4B;AAC5B,4BAA2B;AAE3B,kBAAuF;AACvF,yBAAiE;AACjE,mBAUO;AACP,yBAA2B;AAC3B,yBAA+C;AAC/C,0BAA4B;AAC5B,6BAAsD;AACtD,0BAAkD;AAClD,0BAA4B;AAC5B,0BAA4B;AAC5B,+BAIO;AACP,2BAA8D;AAC9D,kBAMO;AAEP,IAAAA,kBAMO;AACP,iBAAwE;AACxE,qBAAgD;AAChD,IAAAC,mBAAoD;AACpD,IAAAC,yBAA2D;AAC3D,4BAAgC;AAChC,wBAAwB;AAQjB,MAAM,UAAmC;AAAA,EAK9C,YAAY,MAAqB;AAJjC,qBAAY;AAKV,UAAM,EAAE,MAAM,UAAU,SAAS,IAAI;AACrC,SAAK,OAAO;AACZ,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,YAAY;AAC5B,gCAAO,gCAAiB,IAAI;AAAA,EAC9B;AACF;AAEO,MAAM,oBAAuD;AAAA,EAWlE,YAAY,OAA2D,CAAC,GAAG;AAV3E,qBAAY;AAWV,UAAM,EAAE,YAAY,eAAe,eAAe,KAAK,WAAW,QAAQ,QAAQ,IAAI,IAAI;AAC1F,SAAK,aAAa,cAAc,iCAAW;AAC3C,QAAI,eAAe;AACjB,WAAK,oBAAgB,wBAAO,oCAAqB,aAAa;AAAA,IAChE;AACA,QAAI,eAAe;AACjB,WAAK,oBAAgB,wBAAO,oCAAqB,aAAa;AAAA,IAChE;AACA,SAAK,MAAM,OAAO;AAClB,SAAK,YAAY,aAAa;AAC9B,SAAK,SAAS,UAAU,4BAAY;AACpC,SAAK,SAAS,UAAU;AACxB,SAAK,MAAM,OAAO;AAAA,EACpB;AACF;","names":["import_room_pb","import_track_pb","import_video_frame_pb"]}